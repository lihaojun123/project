KISSY.add("gaeagallery/idcard-validation/1.0/idcard-validation",function(a){function b(){var c=this;this.returnMsg=[{code:0,msg:"通过验证！"},{code:1,msg:"输入身份证号不合理!"},{code:2,msg:"身份证号长度验证错误！"},{code:3,msg:"身份证号地区验证错误！"},{code:4,msg:"身份证号日期验证错误！"},{code:5,msg:"身份证号校验位验证错误！"}];this.validateArea=function(e){var f=e.substr(0,2);var d={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};return !(typeof d[parseInt(f)]==="undefined"||d[parseInt(f)]===null)};this.validateNumber=function(d){return/^(\d{15}|\d{18}|\d{17}x)$/i.test(d)};this.validateBirth=function(f){var e=f.length;var h="";if(e===15){h="19"+f.substr(6,2)+"-"+Number(f.substr(8,2))+"-"+Number(f.substr(10,2))}else{if(e===18){h=f.substr(6,4)+"-"+Number(f.substr(10,2))+"-"+Number(f.substr(12,2))}}var g=new Date(h.replace(new RegExp("-","g"),"/"));return !(h!==(g.getFullYear()+"-"+(g.getMonth()+1)+"-"+g.getDate()))};this.validateCode=function(g){var f=g.split("");var e=(parseInt(f[0])+parseInt(f[10]))*7+(parseInt(f[1])+parseInt(f[11]))*9+(parseInt(f[2])+parseInt(f[12]))*10+(parseInt(f[3])+parseInt(f[13]))*5+(parseInt(f[4])+parseInt(f[14]))*8+(parseInt(f[5])+parseInt(f[15]))*4+(parseInt(f[6])+parseInt(f[16]))*2+parseInt(f[7])*1+parseInt(f[8])*6+parseInt(f[9])*3;var h=e%11;var d="10X98765432";var i=d.substr(h,1);return i===f[17]};if(typeof this.init!=="function"){b.prototype.init=function(f){var e=f.length;var d=c.returnMsg[0];switch(true){case typeof f==="undefined"||f==="":d=c.returnMsg[1];break;case e!==18&&e!==15:d=c.returnMsg[2];break;case !c.validateNumber(f):d=c.returnMsg[1];break;case !c.validateArea(f):d=c.returnMsg[3];break;case !c.validateBirth(f):d=c.returnMsg[4];break;case e===18&&!c.validateCode(f):d=c.returnMsg[5];break;default:d=c.returnMsg[0]}return d}}}return b});